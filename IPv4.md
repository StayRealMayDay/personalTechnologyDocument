# IPv4
`IP 地址是由网络部分和主机部分组成，可以通过子网掩码(地址掩码)将其区分开，因为子网掩码就是网络部分全部为1，而主机部分全部为0，所以将IP地址和对应的子网掩码进行按位与运算，就可以得到网络地址。`
## A,B,C类地址
A类地址	第1个8位中的第1位始终为0	0-127.x.x.x	255.0.0.0/8

B类地址	第1个8位中的第1、2位始终为10	128-191.x.x.x	255.255.0.0/16

C类地址	第1个8位中的第1、2、3位始终为110	192-y.x.x.x	255.255.255.0/24
### 特殊地址
D类 以1110开始 用于组播 
E类 以11110开始 用于科研保留

范围上划分有些要注意的： 
A类 从1.0.0.0 到126.255.255.255 

B类 从128.0.0.0到191.255.255.255 

C类 从192.0.0.0到223.255.255.255 

其中127.x.x.x段地址空间是被保留的回环地址

IP地址包含 网络地址+主机地址，即IP地址=网络地址+主机地址

## 子网掩码(全1是网络部分（netID + subnetID）全0是主机部分host ID)

`子网掩码的全1部分其实包含了子网部分，全0的部分只是主机的部分`
子网掩码(subnet mask)又叫网络掩码、地址掩码、子网络遮罩，它是一种用来指明一个IP地址的哪些位标识的是主机所在的子网，以及哪些位标识的是主机的位掩码。

子网掩码不能单独存在，它必须结合IP地址一起使用。子网掩码只有一个作用，就是将某个IP地址划分成网络地址和主机地址两部分。 


子网掩码是一个32位地址，用于屏蔽IP地址的一部分以区别网络标识和主机标识，并说明该IP地址是在局域网上，还是在远程网上。


子网掩码——屏蔽一个IP地址的网络部分的“全1”比特模式。对于A类地址来说，默认的子网掩码是255.0.0.0；对于B类地址来说默认的子网掩码是255.255.0.0；对于C类地址来说默认的子网掩码是255.255.255.0。

通过子网掩码，就可以判断两个IP在不在一个局域网内部。

子网掩码可以看出有多少位是网络号，有多少位是主机号。因为`子网掩码全为1的部分是网络地址部分，全为0的部分是主机地址的部分。`
## 网关 (网关实质上是一个网络通向其他网络的IP地址。可以看作是路由器的接口处的IP地址)


网关(Gateway)又称网间连接器、协议转换器。默认网关在网络层上以实现网络互连，是最复杂的网络互连设备，仅用于两个高层协议不同的网络互连。网关的结构也和路由器类似，不同的是互连层。网关既可以用于广域网互连，也可以用于局域网互连

`网关实质上是一个网络通向其他网络的IP地址。`


比如有网络A和网络B，网络A的IP地址范围为“192.168.1.1~192. 168.1.254”，子网掩码为255.255.255.0；网络B的IP地址范围为“192.168.2.1~192.168.2.254”，子网掩码为255.255.255.0。


在没有路由器的情况下，两个网络之间是不能进行TCP/IP通信的，即使是两个网络连接在同一台交换机（或集线器）上，TCP/IP协议也会根据子网掩码（255.255.255.0）判定两个网络中的主机处在不同的网络里。


而要实现这两个网络之间的通信，则必须通过网关。如果网络A中的主机发现数据包的目的主机不在本地网络中，就把数据包转发给它自己的网关，再由网关转发给网络B的网关，网络B的网关再转发给网络B的某个主机。


所以说，只有设置好网关的IP地址，TCP/IP协议才能实现不同网络之间的相互通信。那么这个IP地址是哪台机器的IP地址呢？网关的IP地址是具有路由功能的设备的IP地址，具有路由功能的设备有路由器、启用了路由协议的服务器（实质上相当于一台路由器）、代理服务器（也相当于一台路由器）。
## 广播地址

`广播地址说白了就是在IP地址的基础上把主机位全部变为1就是广播地址了。`

## 根据子网掩码可以分割网络号+主机号

用子网掩码和IP地址进行与运算就得到了网络地址。


`网络地址+1即为第一个主机地址，广播地址-1即为最后一个主机地址， `


由此可以看出地址范围是： 网络地址+1 至 广播地址-1，
所以`主机的数量=2^二进制位数的主机  - 2`

主机号有5位，那么这个地址中，就只能有个2^5阁个主机
`因为其中全0作为网络地址，全1作为广播地址`


## 根据每个网络的主机数量进行子网地址的规划和计算子网掩码

比如一个子网有10台主机，那么对于这个子网需要的IP地址是 
10＋1＋1＋1＝13 

`注意：加的第一个1是指这个网络连接时所需的网关地址，接着的两个1分别是指网络地址和广播地址。 `

因为13小于16（16等于2的4次方），所以主机位为4位。

而 256－16＝240 所以该子网掩码为255.255.255.240。

如果一个子网有14台主机，不少人常犯的错误是：依然分配具有16个地址空间的子网，而忘记了给网关分配地址。这样就错误了，因为： 
14＋1＋1＋1＝17 
17.大于16，所以我们只能分配具有32个地址（32等于2的5次方）空间的子网。这时子网掩码为：255.255.255.224

## 路由表的IP分配